class MySelect{constructor(e){this.select=e,this.options=[...this.select.querySelectorAll("option")],this.placeholderText=e.querySelector("option[selected]").innerText||"",this.isSearchEnabled=this.select.hasAttribute("data-search"),this.selectWrapper=document.createElement("div"),this.titleBlock=document.createElement(""+(this.isSearchEnabled?"input":"div")),this.dropdown=document.createElement("div"),this.items=[],this.selectWrapper.classList.add("custom-select"),this.titleBlock.classList.add("custom-select__title"),this.dropdown.classList.add("custom-select__dropdown"),this.titleBlock.addEventListener("click",(()=>this.selectToggle())),this.isSearchEnabled&&this.titleBlock.addEventListener("input",(e=>this.search(e))),document.addEventListener("click",(e=>{e.target.closest(".custom-select")!==this.selectWrapper&&this.selectClose()}))}_buildComponent(){this.select.after(this.selectWrapper);const e=document.createElement("label");e.classList.add("custom-select__search"),e.append(this.titleBlock),this.isSearchEnabled?this.titleBlock.setAttribute("placeholder",this.placeholderText):this.titleBlock.innerText=this.placeholderText,this.selectWrapper.appendChild(this.select),this.selectWrapper.appendChild(this.isSearchEnabled?e:this.titleBlock),this.selectWrapper.appendChild(this.dropdown)}_createListItem(e){const t=document.createElement("li");return t.classList.add("custom-select__item"),t.dataset.value=e.value,t.innerHTML=e.innerHTML,t}_renderItems(e=this.options){this.dropdown.innerHTML="",this.items=[],e.forEach((e=>{if(e.hasAttribute("hidden"))return;const t=this._createListItem(e);this.items=[...this.items,t]})),this.items.forEach((e=>{e.addEventListener("click",(e=>this.onChange(e))),this.dropdown.appendChild(e)}))}selectToggle(){this.selectWrapper.classList.toggle("custom-select--active")}selectOpen(){this.selectWrapper.classList.add("custom-select--active")}selectClose(){this.selectWrapper.classList.remove("custom-select--active")}filteredOptions(e){return this.options.filter((t=>t.innerText.toLocaleLowerCase().includes(e.toLocaleLowerCase())))}init(){this._buildComponent(),this._renderItems()}search(e){const t=this.filteredOptions(e.target.value);this._renderItems(t)}onChange(e){this.select.value=e.target.dataset.value,this.isSearchEnabled?this.titleBlock.value=e.target.innerText:this.titleBlock.innerText=e.target.innerText,this.selectClose(),this.select.dispatchEvent(new Event("change",e))}}document.addEventListener("DOMContentLoaded",(()=>{[...document.querySelectorAll(".select-styler-js")].forEach((e=>{new MySelect(e).init(),e.addEventListener("change",(e=>{console.log(e.target.value)}))}))}));